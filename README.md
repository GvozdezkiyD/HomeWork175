# PD-–º–æ–¥–µ–ª—å: –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞

**–ó–∞–¥–∞—á–∞.** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å–∫–≤–æ–∑–Ω–æ–π –ø–∞–π–ø–ª–∞–π–Ω: –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞/–≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, –æ–±—É—á–µ–Ω–∏–µ —Å MLflow,
DVC-–≤–µ—Ä—Å–∏–∏, —Ç–µ—Å—Ç—ã/CI, REST API –Ω–∞ FastAPI, Docker, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥—Ä–∏—Ñ—Ç–∞ (PSI).

## –î–∞–Ω–Ω—ã–µ
UCI "Default of Credit Card Clients".`data/raw/UCI_Credit_Card.csv` (–≤–µ—Ä—Å–∏—Ä—É–µ—Ç—Å—è DVC).

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ raw/                      # –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∫–ª–∞—Å—Ç—å —Å—é–¥–∞ UCI_Credit_Card.csv)
‚îÇ   ‚îú‚îÄ‚îÄ processed/                # train.csv / test.csv –ø–æ—Å–ª–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ expectations/             # –æ—Ç—á—ë—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (Pandera/GE) .json
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ make_dataset.py       # –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞ –∏ —Å–ø–ª–∏—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validation.py         # –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (Pandera/GE)
‚îÇ   ‚îú‚îÄ‚îÄ features/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ build_features.py     # –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ (–±–∏–Ω–Ω–∏–Ω–≥–∏, ratio –∏ —Ç.–ø.)
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pipeline.py           # sklearn Pipeline (preprocess + classifier)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ train.py              # –æ–±—É—á–µ–Ω–∏–µ, –º–µ—Ç—Ä–∏–∫–∏, MLflow, ROC
‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ       ‚îî‚îÄ‚îÄ app.py                # FastAPI /predict
‚îú‚îÄ‚îÄ monitor/
‚îÇ   ‚îî‚îÄ‚îÄ drift_monitor.py          # —Ä–∞—Å—á—ë—Ç PSI –∏ –æ—Ç—á—ë—Ç
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ credit_default_model.pkl  # —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–∞—è –º–æ–¥–µ–ª—å (joblib)
‚îú‚îÄ‚îÄ reports/
‚îÇ   ‚îú‚îÄ‚îÄ figures/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ roc_curve.png         # ROC-–∫—Ä–∏–≤–∞—è
‚îÇ   ‚îî‚îÄ‚îÄ drift/                    # 
‚îú‚îÄ‚îÄ .github/workflows/ci.yml      # pytest + flake8 + black + –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ dvc.yaml                      # –ø–∞–π–ø–ª–∞–π–Ω DVC (prepare -> train)
‚îú‚îÄ‚îÄ dvc.lock                      # ¬´–∑–∞–º–æ—Ä–æ–∑–∫–∞¬ª –≤–µ—Ä—Å–∏–π –¥–∞–Ω–Ω—ã—Ö/–∫–æ–º–∞–Ω–¥
‚îú‚îÄ‚îÄ Makefile                      # make run-all / run-api / dvc / docker (Linux/macOS)
‚îú‚îÄ‚îÄ run_all.ps1                   # –ø–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤ Windows PowerShell
‚îú‚îÄ‚îÄ Dockerfile                    # –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è API
‚îú‚îÄ‚îÄ requirements.txt              # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ README.md
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
```bash
python -m venv .venv && source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt

#  dvc init && dvc add data/raw/UCI_Credit_Card.csv
python src/data/make_dataset.py
python src/data/validation.py
python src/models/train.py
```

### MLflow UI
```bash
mlflow ui
```

### DVC
```bash
dvc init
dvc add data/raw/UCI_Credit_Card.csv
dvc repro
```

### API
```bash
uvicorn src.api.app:APP --host 0.0.0.0 --port 8000
```

### Docker
```bash
docker build -t credit-scoring-api .
docker run --rm -p 8000:8000 credit-scoring-api
```

### –¢–µ—Å—Ç—ã –∏ —Å—Ç–∏–ª—å
```bash
pytest -q
flake8
black --check .
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥—Ä–∏—Ñ—Ç–∞
```bash
python monitor/drift_monitor.py
```

---

## –í–∞—Ä–∏–∞–Ω—Ç A (Linux / macOS / Git Bash)

–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –≤ –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å **Makefile**, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–µ—Å—å –ø–∞–π–ø–ª–∞–π–Ω –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π.

### –ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞:
```bash
make run-all
```

–ö–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
1. –£—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π  
2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫—É –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö  
3. –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ MLflow  
4. –¢–µ—Å—Ç—ã –∏ –ª–∏–Ω—Ç–∏–Ω–≥  
5. –†–∞—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫–∏ –¥—Ä–∏—Ñ—Ç–∞ (PSI)

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ—è–≤–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
‚úÖ –ì–æ—Ç–æ–≤–æ! –ú–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞, –º–µ—Ç—Ä–∏–∫–∏ –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω—ã, PSI —Ä–∞—Å—Å—á–∏—Ç–∞–Ω.
üëâ –ó–∞–ø—É—Å—Ç–∏ API: make run-api  (–∏–ª–∏)  uvicorn src.api.app:APP --host 0.0.0.0 --port 8000
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
make run-api       # –∑–∞–ø—É—Å–∫ REST API
make mlflow-ui     # –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å MLflow
make dvc-init      # –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è DVC
make dvc-repro     # –ø—Ä–æ–≥–æ–Ω DVC –ø–∞–π–ø–ª–∞–π–Ω–∞
make docker-build  # —Å–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞
make docker-run    # –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
make clean         # –æ—á–∏—Å—Ç–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (data/processed, models, reports, mlruns)
```

---

## –í–∞—Ä–∏–∞–Ω—Ç B (Windows PowerShell)

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Windows –±–µ–∑ —É—Ç–∏–ª–∏—Ç—ã `make`, –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º **`run_all.ps1`**.

–û–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ —à–∞–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- —É—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π  
- –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö  
- –æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏  
- —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ç–∏–ª—è  
- —Ä–∞—Å—á—ë—Ç –¥—Ä–∏—Ñ—Ç–∞ PSI

### –ó–∞–ø—É—Å–∫:
```powershell
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass

\.run_all.ps1

```

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ—è–≤–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
‚úÖ –ì–æ—Ç–æ–≤–æ! –ú–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞, –º–µ—Ç—Ä–∏–∫–∏ –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω—ã, PSI —Ä–∞—Å—Å—á–∏—Ç–∞–Ω.
üëâ –ó–∞–ø—É—Å–∫ API: uvicorn src.api.app:APP --host 0.0.0.0 --port 8000
```

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å ‚Äî –æ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –∏ —Ä–∞—Å—á—ë—Ç–∞ –º–µ—Ç—Ä–∏–∫ ‚Äî –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å **–æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π**.
